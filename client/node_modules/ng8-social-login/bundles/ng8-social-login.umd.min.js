!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ng8-social-login",["exports","@angular/core","rxjs","rxjs/operators"],t):t((e=e||self)["ng8-social-login"]={},e.ng.core,e.rxjs,e.rxjs.operators)}(this,function(e,t,o,r){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};function i(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var a=function(){return(a=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var s=new t.InjectionToken("providers configuration"),c=function(e,t,o,r){void 0===r&&(r=!0),this.ID_PREFIX="social-login__";var n=this.ID_PREFIX+e;if(!document.getElementById(n)){var i=document.createElement("script");i.id=n,i.async=r,i.src=t,i.onload=o,i.defer=!0,document.head.appendChild(i)}};var u={FACEBOOK:"facebook",GOOGLE:"google"},p=function(e){function t(t){var o=e.call(this,u.FACEBOOK,"//connect.facebook.net/en_US/sdk.js",function(){var e=o._config.initOptions,t=e.version?e:a({},e,{version:"v2.9"});FB.init(t)})||this;return o._config=t,o}return i(t,e),t.prototype.login=function(){var e=this;return o.bindCallback(function(t){return FB.login(t,e._config.loginOptions)})().pipe(r.mergeMap(function(e){return o.bindCallback(function(e){return FB.api("/me?fields=name,email,picture,first_name,last_name",e)})().pipe(r.map(function(t){return{id:t.id,name:t.name,email:t.email,profileImg:"https://graph.facebook.com/"+t.id+"/picture?type=normal",firstName:t.first_name,lastName:t.last_name,idToken:e.authResponse.signedRequest,accessToken:e.authResponse.accessToken}}))}))},t.prototype.logout=function(){return FB.logout(),o.of(!0)},t}(c);var l=function(e){function t(t){var o=e.call(this,u.GOOGLE,"//apis.google.com/js/platform.js",function(){gapi.load("auth2",function(){var e=t.scope?t:a({},t,{scope:"email"});gapi.auth2.init(e).then(function(e){return o._googleAuth=e})})})||this;return o}return i(t,e),t.prototype.login=function(){var e=this;return o.from(this._googleAuth.signIn({prompt:"select_account"})).pipe(r.map(function(){var t=e._googleAuth.currentUser.get().getBasicProfile(),o=e._googleAuth.currentUser.get().getAuthResponse(!0).access_token,r=e._googleAuth.currentUser.get().getAuthResponse(!0).id_token;return{id:t.getId(),email:t.getEmail(),name:t.getName(),profileImg:t.getImageUrl(),accessToken:o,idToken:r}}))},t.prototype.logout=function(){var e=this;return o.Observable.create(function(t){return t.complete(e._googleAuth.signOut())})},t}(c);var f=function(){function e(e){var t=this;this._providers={},this._providers=Object.keys(e).reduce(function(o,r){var n=u[r.toUpperCase()];return o[n]=t.oauthProviderFactory(n,e[r]),o},{})}return e.prototype.login=function(e){this._providerInUse=e;var t=this._providers[e];return t?t.login():o.EMPTY},e.prototype.logout=function(){var e=this._providers[this._providerInUse],t=e?e.logout():o.EMPTY;return this._providerInUse=void 0,t},e.prototype.loggedIn=function(){return!!this._providerInUse},e.prototype.oauthProviderFactory=function(e,t){switch(e){case u.FACEBOOK:return new p(t);case u.GOOGLE:return new l(t)}},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[s]}]}]},e}();var g=function(){function e(){}return e.init=function(t){return{ngModule:e,providers:[{provide:s,useValue:t}]}},e.decorators=[{type:t.NgModule,args:[{providers:[f]}]}],e}();e.NgxSocialLoginModule=g,e.Provider=u,e.SocialLoginService=f,e.Éµa=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng8-social-login.umd.min.js.map